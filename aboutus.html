from flask import Flask, request, render_template

app = Flask(__name__)

class BankAccount:
    def __init__(self, account_holder_name, account_number):
        self.account_holder_name = account_holder_name
        self.account_number = account_number
        self.balance = 0.0

    def deposit(self, amount):
        if amount > 0:
            self.balance += amount
            return f"Deposited {amount} successfully"
        return "Invalid deposit amount"

    def withdraw(self, amount):
        if amount > 0 and amount <= self.balance:
            self.balance -= amount
            return f"Withdrew {amount} successfully"
        return "Insufficient funds"

    def check_balance(self):
        return f"Current balance: {self.balance}"

class Bank:
    def __init__(self):
        self.accounts = {}

    def create_account(self, account_holder_name, account_number):
        if account_number in self.accounts:
            return "Account already exists"
        self.accounts[account_number] = BankAccount(account_holder_name, account_number)
        return f"Account created for {account_holder_name}"

    def get_account(self, account_number):
        return self.accounts.get(account_number, None)

bank = Bank()

@app.route('/')
def home():
    return render_template('index.html')

@app.route('/create_account', methods=['POST'])
def create_account():
    name = request.form['name']
    account_number = int(request.form['account_number'])
    return bank.create_account(name, account_number)

@app.route('/deposit', methods=['POST'])
def deposit():
    account_number = int(request.form['account_number'])
    amount = float(request.form['amount'])
    account = bank.get_account(account_number)
    if account:
        return account.deposit(amount)
    return "Account not found"

@app.route('/withdraw', methods=['POST'])
def withdraw():
    account_number = int(request.form['account_number'])
    amount = float(request.form['amount'])
    account = bank.get_account(account_number)
    if account:
        return account.withdraw(amount)
    return "Account not found"

@app.route('/check_balance', methods=['POST'])
def check_balance():
    account_number = int(request.form['account_number'])
    account = bank.get_account(account_number)
    if account:
        return account.check_balance()
    return "Account not found"

if __name__ == "__main__":
    app.run(debug=True)
